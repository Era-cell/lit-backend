import{d as t}from"./constants-RSApeIlE.js";import{trigger_N as e}from"./pull_arms.js";import"https://cdn.jsdelivr.net/npm/axios@1.6.7/+esm";import"https://cdn.jsdelivr.net/npm/simplebandit/+esm";import"../../../../src/assets/model.js";class o{DOM={el:null,bg:null,content:null,contentTitle:null,contentDescription:null,cells:null};rows;cols;isOpen=!1;tl;constructor(t){this.DOM.el=t,this.DOM.bg=this.DOM.el.querySelector(".tooltip__bg"),this.DOM.content=this.DOM.el.querySelector(".tooltip__content"),this.DOM.contentTitle=this.DOM.content.querySelector(".tooltip__content-title"),this.DOM.contentDescription=this.DOM.content.querySelector(".tooltip__content-desc"),this.rows=parseInt(this.DOM.el.dataset.rows,10)||4,this.cols=parseInt(this.DOM.el.dataset.cols,10)||4,this.#t()}calculateTooltipPosition(t=document.querySelector("my-element").shadowRoot.querySelector("main").querySelector(".content").querySelector("content-left")){const e=t.getBoundingClientRect(),o=this.DOM.el.getBoundingClientRect(),i=e.left+e.width/2,s=e.top+e.height/2;return{left:i-o.width/2,top:s-o.height/2}}updatePosition(t){const e=this.calculateTooltipPosition();this.DOM.el.style.left=`${e.left}px`,this.DOM.el.style.top=`${e.top}px`}#t(){let t="";for(let e=0;e<this.rows;e++)for(let e=0;e<this.cols;e++)t+="<div></div>";this.DOM.bg.innerHTML=t,this.DOM.el.style.setProperty("--tt-columns",this.cols),this.DOM.el.style.setProperty("--tt-rows",this.rows),this.DOM.cells=[...this.DOM.bg.querySelectorAll("div")]}toggle(t,e){this.isOpen=!this.isOpen,this.#e(t,e)}#e(t,e){const o=`animate${t.charAt(0).toUpperCase()+t.slice(1)}`;"function"==typeof this[o]?this[o](e):console.warn(`Animation effect '${t}' is not defined.`)}createDefaultTimeline({duration:t=.1,ease:e="expo"}={}){return this.tl&&this.tl.kill(),gsap.timeline({defaults:{duration:t,ease:e},onStart:()=>{this.isOpen?(gsap.set(this.DOM.el,{zIndex:99999}),this.DOM.el.classList.add("tooltip--show")):gsap.set(this.DOM.el,{zIndex:0})},onComplete:()=>{this.isOpen||this.DOM.el.classList.remove("tooltip--show")}})}animateTooltipContent(){this.tl.fromTo([this.DOM.contentTitle,this.DOM.contentDescription],{opacity:this.isOpen?0:1},{duration:.2,opacity:this.isOpen?1:0,stagger:this.isOpen?.2:0},this.isOpen?.4:0).add((()=>{this.DOM.contentTitle.classList[this.isOpen?"add":"remove"]("glitch")}),this.isOpen?.8:0).add((()=>{this.DOM.contentDescription.classList[this.isOpen?"add":"remove"]("glitch")}),this.isOpen?1:0)}animateEffect1(t){this.tl=this.createDefaultTimeline();const e=t.clientX,o=t.clientY,i=document.documentElement.scrollWidth,s=document.documentElement.scrollHeight,l=Math.sqrt(i*i+s*s);this.DOM.cells.forEach((t=>{const i=t.getBoundingClientRect(),s=i.left,n=i.top,a=Math.sqrt(Math.pow(s-e,2)+Math.pow(n-o,2))/l*1.8;this.isOpen?this.tl.fromTo(t,{opacity:0},{opacity:1,delay:a},0):this.tl.to(t,{opacity:0,delay:a},0)})),this.animateTooltipContent()}animateEffect2(){this.tl=this.createDefaultTimeline(),this.isOpen?this.tl.fromTo(this.DOM.cells,{opacity:0,scale:0},{opacity:1,scale:1,stagger:{each:.02,from:"start"}},0):this.tl.to(this.DOM.cells,{opacity:0,scale:0,stagger:{each:.02,from:"end"}},0),this.animateTooltipContent()}animateEffect3(){this.tl=this.createDefaultTimeline(),this.isOpen?this.tl.fromTo(this.DOM.cells,{opacity:0,scale:0,yPercent:()=>gsap.utils.random(-200,200)},{opacity:1,scale:1,yPercent:0,stagger:{each:.03,from:"center",grid:"auto"}},0):this.tl.to(this.DOM.cells,{opacity:0,scale:0,yPercent:()=>gsap.utils.random(-200,200),stagger:{each:.03,from:"center",grid:"auto"}},0),this.animateTooltipContent()}animateEffect4(){this.tl=this.createDefaultTimeline(),this.isOpen?this.tl.fromTo(this.DOM.cells,{opacity:0,scaleX:.8,xPercent:()=>gsap.utils.random(-200,200)},{opacity:1,scaleX:1,xPercent:0,stagger:{each:.02,from:"random",grid:"auto"}},0):this.tl.to(this.DOM.cells,{opacity:0,scaleX:.8,xPercent:()=>gsap.utils.random(-200,200),stagger:{each:.02,from:"random",grid:"auto"}},0),this.animateTooltipContent()}animateEffect5(){this.tl=this.createDefaultTimeline(),this.isOpen?this.tl.fromTo(this.DOM.cells,{opacity:0,scale:0},{opacity:1,scale:1,stagger:{each:.02,from:"center",grid:"auto"}},0):this.tl.to(this.DOM.cells,{opacity:0,scale:0,stagger:{each:.02,from:"edges",grid:"auto"}},0),this.animateTooltipContent()}animateEffect6(){this.DOM.bg.style.filter="url(#gooey)",this.tl=this.createDefaultTimeline({duration:.9,ease:"expo"}),this.isOpen?this.tl.fromTo(this.DOM.cells,{opacity:0,scale:.3},{opacity:1,scale:1,stagger:{each:.08,from:"random",grid:"auto"}},0):this.tl.to(this.DOM.cells,{opacity:0,scale:.3,stagger:{each:.04,from:"random",grid:"auto"}},0),this.animateTooltipContent()}}console.log(e),console.log(document.querySelector("my-element").shadowRoot.querySelector("main").querySelector("header-component").shadowRoot.querySelector(".frame"));const i=document.querySelector("my-element").shadowRoot.querySelector("main").querySelector("header-component").shadowRoot.querySelectorAll("span"),s="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,l=s?"touchstart":"mouseenter",n=s?"touchmove":"mousemove",a=s?"touchend":"mouseleave",c=document.querySelector("my-element").shadowRoot.querySelector("main").querySelector("header-component").shadowRoot.getElementById("tooltip-"+e.toString()),r=[],h=[];for(let t=1;t<=3;t++){i[t-1].setAttribute("data-tooltip","tooltip-"+e.toString()),i[t-1].setAttribute("data-effect","effect"+e.toString());const s=`tooltip_${t}`,l=c.cloneNode(!0);l.id=s,r.push(l),h.push(new o(l))}const p=document.querySelector("my-element").shadowRoot.querySelector("main").querySelector("header-component").shadowRoot;i.forEach(((e,o)=>{let i,c;const m=t[(u=o,Math.floor(2*Math.random())+2*u)];var u;p.appendChild(r[o]),r[o].querySelector(".tooltip__content").querySelector(".tooltip__content-title").innerHTML=m.title,r[o].querySelector(".tooltip__content").querySelector(".tooltip__content-desc").innerHTML=m.desc,e.addEventListener(l,(t=>{clearTimeout(c),i=setTimeout((()=>{s&&t.preventDefault();const i=s?t.touches[0]:t;h[o].isOpen||(h[o].updatePosition(i),h[o].toggle(e.dataset.effect,i))}),40)})),e.addEventListener(n,(t=>{s&&t.preventDefault();const e=s?t.touches[0]:t;h[o].isOpen&&h[o].updatePosition(e)})),e.addEventListener(a,(t=>{clearTimeout(i),c=setTimeout((()=>{h[o].isOpen&&h[o].toggle(e.dataset.effect,t)}),40)}))}));
